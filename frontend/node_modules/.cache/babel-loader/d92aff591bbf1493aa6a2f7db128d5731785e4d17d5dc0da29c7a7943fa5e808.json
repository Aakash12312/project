{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import\"./Blog.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Blog=()=>{var _blog$author,_blog$author2;const{id}=useParams();const[blog,setBlog]=useState(null);const[isSummarized,setIsSummarized]=useState(false);const[comments,setComments]=useState([]);const[newComment,setNewComment]=useState(\"\");const[commentAnalysis,setCommentAnalysis]=useState(null);useEffect(()=>{const fetchBlog=async()=>{try{const response=await fetch(\"https://project-gilt-sigma-12.vercel.app/blog/\".concat(id));const data=await response.json();setBlog(data.blog);const commentsResponse=await fetch(\"https://project-gilt-sigma-12.vercel.app/blog/\".concat(id,\"/comments\"));const commentsData=await commentsResponse.json();setComments(commentsData.comments);}catch(error){console.error(\"Error fetching blog:\",error);}};fetchBlog();},[id]);const handleSummarize=async()=>{try{const response=await fetch(\"https://project-gilt-sigma-12.vercel.app/blog/\".concat(id,\"/summarize\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},credentials:\"include\"});const data=await response.json();if(response.ok){setBlog(data.blog);setIsSummarized(true);}else{console.error(data.error||\"Error summarizing blog\");}}catch(error){console.error(\"Error summarizing blog:\",error);}};const handleAnalyzeComments=async()=>{try{const response=await fetch(\"https://project-gilt-sigma-12.vercel.app/blog/\".concat(id,\"/analyzeComments\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},credentials:\"include\"});const data=await response.json();if(response.ok){setCommentAnalysis(data.analysis);}else{console.error(data.error||\"Error analyzing comments\");}}catch(error){console.error(\"Error analyzing comments:\",error);}};const handleAddComment=async e=>{e.preventDefault();try{const response=await fetch(\"https://project-gilt-sigma-12.vercel.app/blog/\".concat(id,\"/comments\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},credentials:\"include\",body:JSON.stringify({content:newComment})});if(response.ok){const data=await response.json();setComments([data.comment,...comments]);setNewComment(\"\");}else{console.error(\"Error adding comment\");}}catch(error){console.error(\"Error adding comment:\",error);}};if(!blog)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"blog-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"blog-detail\",children:[/*#__PURE__*/_jsx(\"h1\",{children:blog.title}),/*#__PURE__*/_jsx(\"p\",{children:blog.content}),/*#__PURE__*/_jsxs(\"div\",{className:\"blog-meta\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Author:\"}),\" \",((_blog$author=blog.author)===null||_blog$author===void 0?void 0:_blog$author.Name)||\"Unknown\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",((_blog$author2=blog.author)===null||_blog$author2===void 0?void 0:_blog$author2.Email)||\"Unknown\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Created At:\"}),\" \",new Date(blog.createdAt).toLocaleString()]})]}),!isSummarized&&/*#__PURE__*/_jsx(\"button\",{onClick:handleSummarize,className:\"summarize-btn\",children:\"Summarize\"}),isSummarized&&/*#__PURE__*/_jsx(\"p\",{children:\"This blog has been summarized.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"comments-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Comments\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAnalyzeComments,className:\"analyze-btn\",children:\"Analyze Comments\"}),commentAnalysis&&/*#__PURE__*/_jsxs(\"div\",{className:\"comment-analysis\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Analysis:\"}),/*#__PURE__*/_jsx(\"p\",{children:commentAnalysis})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddComment,children:[/*#__PURE__*/_jsx(\"textarea\",{value:newComment,onChange:e=>setNewComment(e.target.value),placeholder:\"Write a comment...\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"comment-btn\",children:\"Post Comment\"})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"comments-list\",children:comments.map(comment=>{var _comment$author;return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[((_comment$author=comment.author)===null||_comment$author===void 0?void 0:_comment$author.Name)||\"Anonymous\",\":\"]}),\" \",comment.content]}),/*#__PURE__*/_jsx(\"small\",{children:new Date(comment.createdAt).toLocaleString()})]},comment._id);})})]})]});};export default Blog;","map":{"version":3,"names":["React","useEffect","useState","useParams","jsx","_jsx","jsxs","_jsxs","Blog","_blog$author","_blog$author2","id","blog","setBlog","isSummarized","setIsSummarized","comments","setComments","newComment","setNewComment","commentAnalysis","setCommentAnalysis","fetchBlog","response","fetch","concat","data","json","commentsResponse","commentsData","error","console","handleSummarize","method","headers","credentials","ok","handleAnalyzeComments","analysis","handleAddComment","e","preventDefault","body","JSON","stringify","content","comment","children","className","title","author","Name","Email","Date","createdAt","toLocaleString","onClick","onSubmit","value","onChange","target","placeholder","required","type","map","_comment$author","_id"],"sources":["C:/Users/Aakash/OneDrive/Documents/MyApp/frontend/src/components/Blog.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport \"./Blog.css\";\r\n\r\nconst Blog = () => {\r\n    const { id } = useParams();\r\n    const [blog, setBlog] = useState(null);\r\n    const [isSummarized, setIsSummarized] = useState(false);\r\n    const [comments, setComments] = useState([]);\r\n    const [newComment, setNewComment] = useState(\"\");\r\n    const [commentAnalysis, setCommentAnalysis] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchBlog = async () => {\r\n            try {\r\n                const response = await fetch(`https://project-gilt-sigma-12.vercel.app/blog/${id}`);\r\n                const data = await response.json();\r\n                setBlog(data.blog);\r\n\r\n                const commentsResponse = await fetch(`https://project-gilt-sigma-12.vercel.app/blog/${id}/comments`);\r\n                const commentsData = await commentsResponse.json();\r\n                setComments(commentsData.comments);\r\n            } catch (error) {\r\n                console.error(\"Error fetching blog:\", error);\r\n            }\r\n        };\r\n        fetchBlog();\r\n    }, [id]);\r\n\r\n    const handleSummarize = async () => {\r\n        try {\r\n            const response = await fetch(`https://project-gilt-sigma-12.vercel.app/blog/${id}/summarize`, {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                credentials: \"include\",\r\n            });\r\n\r\n            const data = await response.json();\r\n            if (response.ok) {\r\n                setBlog(data.blog);\r\n                setIsSummarized(true);\r\n            } else {\r\n                console.error(data.error || \"Error summarizing blog\");\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error summarizing blog:\", error);\r\n        }\r\n    };\r\n\r\n    const handleAnalyzeComments = async () => {\r\n        try {\r\n            const response = await fetch(`https://project-gilt-sigma-12.vercel.app/blog/${id}/analyzeComments`, {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                credentials: \"include\",\r\n            });\r\n\r\n            const data = await response.json();\r\n            if (response.ok) {\r\n                setCommentAnalysis(data.analysis);\r\n            } else {\r\n                console.error(data.error || \"Error analyzing comments\");\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error analyzing comments:\", error);\r\n        }\r\n    };\r\n\r\n    const handleAddComment = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const response = await fetch(`https://project-gilt-sigma-12.vercel.app/blog/${id}/comments`, {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                credentials: \"include\",\r\n                body: JSON.stringify({ content: newComment }),\r\n            });\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setComments([data.comment, ...comments]);\r\n                setNewComment(\"\");\r\n            } else {\r\n                console.error(\"Error adding comment\");\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error adding comment:\", error);\r\n        }\r\n    };\r\n\r\n    if (!blog) return <div>Loading...</div>;\r\n\r\n    return (\r\n        <div className=\"blog-container\">\r\n            <div className=\"blog-detail\">\r\n                <h1>{blog.title}</h1>\r\n                <p>{blog.content}</p>\r\n                <div className=\"blog-meta\">\r\n                    <p><strong>Author:</strong> {blog.author?.Name || \"Unknown\"}</p>\r\n                    <p><strong>Email:</strong> {blog.author?.Email || \"Unknown\"}</p>\r\n                    <p><strong>Created At:</strong> {new Date(blog.createdAt).toLocaleString()}</p>\r\n                </div>\r\n                {!isSummarized && (\r\n                    <button onClick={handleSummarize} className=\"summarize-btn\">\r\n                        Summarize\r\n                    </button>\r\n                )}\r\n                {isSummarized && <p>This blog has been summarized.</p>}\r\n            </div>\r\n\r\n            <div className=\"comments-section\">\r\n                <h2>Comments</h2>\r\n                <button onClick={handleAnalyzeComments} className=\"analyze-btn\">\r\n                    Analyze Comments\r\n                </button>\r\n                {commentAnalysis && (\r\n                    <div className=\"comment-analysis\">\r\n                        <strong>Analysis:</strong>\r\n                        <p>{commentAnalysis}</p>\r\n                    </div>\r\n                )}\r\n                <form onSubmit={handleAddComment}>\r\n                    <textarea\r\n                        value={newComment}\r\n                        onChange={(e) => setNewComment(e.target.value)}\r\n                        placeholder=\"Write a comment...\"\r\n                        required\r\n                    ></textarea>\r\n                    <button type=\"submit\" className=\"comment-btn\">Post Comment</button>\r\n                </form>\r\n                <ul className=\"comments-list\">\r\n                    {comments.map((comment) => (\r\n                        <li key={comment._id}>\r\n                            <p><strong>{comment.author?.Name || \"Anonymous\"}:</strong> {comment.content}</p>\r\n                            <small>{new Date(comment.createdAt).toLocaleString()}</small>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Blog;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}